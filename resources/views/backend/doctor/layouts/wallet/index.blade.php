@extends('backend.doctor.app')
@section('content')
    <div class="main-content">
        <div class="main-content-container">
            <!-- main container header start -->
            <div class="main-content-header">
                <svg class="menu-icon" width="24px" height="24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                    <path
                        d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z" />
                </svg>
                <div class="section-title">Welcome {{ Auth::user()->name }} ðŸ‘‹</div>
                <div class="header-actions">

                    <div data-bs-toggle="modal" data-bs-target="#notificationModal" class="notification-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="41" viewBox="0 0 40 41"
                            fill="none">
                            <rect x="0.5" y="1" width="39" height="39" rx="7.5" fill="white"
                                stroke="#E8E8E8" />
                            <path
                                d="M20.0199 29.03C17.6899 29.03 15.3599 28.66 13.1499 27.92C12.3099 27.63 11.6699 27.04 11.3899 26.27C11.0999 25.5 11.1999 24.65 11.6599 23.89L12.8099 21.98C13.0499 21.58 13.2699 20.78 13.2699 20.31V17.42C13.2699 13.7 16.2999 10.67 20.0199 10.67C23.7399 10.67 26.7699 13.7 26.7699 17.42V20.31C26.7699 20.77 26.9899 21.58 27.2299 21.99L28.3699 23.89C28.7999 24.61 28.8799 25.48 28.5899 26.27C28.2999 27.06 27.6699 27.66 26.8799 27.92C24.6799 28.66 22.3499 29.03 20.0199 29.03ZM20.0199 12.17C17.1299 12.17 14.7699 14.52 14.7699 17.42V20.31C14.7699 21.04 14.4699 22.12 14.0999 22.75L12.9499 24.66C12.7299 25.03 12.6699 25.42 12.7999 25.75C12.9199 26.09 13.2199 26.35 13.6299 26.49C17.8099 27.89 22.2399 27.89 26.4199 26.49C26.7799 26.37 27.0599 26.1 27.1899 25.74C27.3199 25.38 27.2899 24.99 27.0899 24.66L25.9399 22.75C25.5599 22.1 25.2699 21.03 25.2699 20.3V17.42C25.2699 14.52 22.9199 12.17 20.0199 12.17Z"
                                fill="#A9A9A9" />
                            <path
                                d="M21.8796 12.4401C21.8096 12.4401 21.7396 12.4301 21.6696 12.4101C21.3796 12.3301 21.0996 12.2701 20.8296 12.2301C19.9796 12.1201 19.1596 12.1801 18.3896 12.4101C18.1096 12.5001 17.8096 12.4101 17.6196 12.2001C17.4296 11.9901 17.3696 11.6901 17.4796 11.4201C17.8896 10.3701 18.8896 9.68005 20.0296 9.68005C21.1696 9.68005 22.1696 10.3601 22.5796 11.4201C22.6796 11.6901 22.6296 11.9901 22.4396 12.2001C22.2896 12.3601 22.0796 12.4401 21.8796 12.4401Z"
                                fill="#A9A9A9" />
                            <path
                                d="M20.0195 31.3101C19.0295 31.3101 18.0695 30.9101 17.3695 30.2101C16.6695 29.5101 16.2695 28.5501 16.2695 27.5601H17.7695C17.7695 28.1501 18.0095 28.7301 18.4295 29.1501C18.8495 29.5701 19.4295 29.8101 20.0195 29.8101C21.2595 29.8101 22.2695 28.8001 22.2695 27.5601H23.7695C23.7695 29.6301 22.0895 31.3101 20.0195 31.3101Z"
                                fill="#A9A9A9" />
                        </svg>
                    </div>
                </div>
            </div>
            <!-- main container header end -->
            <!-- dashboard content start -->
            <div class="d-flex justify-content-end mt-4 mt-md-5">
                <a target="_blank" href="{{route('doctor.stripe.account.dashboard')}}" class="btn btn-success btn-sm" style="padding: 6px 10px; font-size: 14px">Stripe Dashboard</a>
            </div>
            <div class="dashboard-statistics mt-3">
                <div class="item">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                            fill="none">
                            <path
                                d="M11.9402 2.20995L9.5302 7.81995H7.1202C6.7202 7.81995 6.3302 7.84995 5.9502 7.92995L6.9502 5.52995L6.9902 5.43995L7.0502 5.27995C7.0802 5.20995 7.1002 5.14995 7.1302 5.09995C8.2902 2.40995 9.5902 1.56995 11.9402 2.20995Z"
                                fill="#187586" />
                            <path
                                d="M18.7301 8.09002L18.7101 8.08002C18.1101 7.91002 17.5001 7.82002 16.8801 7.82002H10.6201L12.8701 2.59002L12.9001 2.52002C13.0401 2.57002 13.1901 2.64002 13.3401 2.69002L15.5501 3.62002C16.7801 4.13002 17.6401 4.66002 18.1701 5.30002C18.2601 5.42002 18.3401 5.53002 18.4201 5.66002C18.5101 5.80002 18.5801 5.94002 18.6201 6.09002C18.6601 6.18002 18.6901 6.26002 18.7101 6.35002C18.8601 6.86002 18.8701 7.44002 18.7301 8.09002Z"
                                fill="#187586" />
                            <path
                                d="M12.5195 17.66H12.7695C13.0695 17.66 13.3195 17.39 13.3195 17.06C13.3195 16.64 13.1995 16.58 12.9395 16.48L12.5195 16.33V17.66Z"
                                fill="#187586" />
                            <path
                                d="M18.2902 9.51995C17.8402 9.38995 17.3702 9.31995 16.8802 9.31995H7.12023C6.44023 9.31995 5.80023 9.44995 5.20023 9.70995C3.46023 10.4599 2.24023 12.1899 2.24023 14.1999V16.1499C2.24023 16.3899 2.26023 16.6199 2.29023 16.8599C2.51023 20.0399 4.21023 21.7399 7.39023 21.9499C7.62023 21.9799 7.85023 21.9999 8.10023 21.9999H15.9002C19.6002 21.9999 21.5502 20.2399 21.7402 16.7399C21.7502 16.5499 21.7602 16.3499 21.7602 16.1499V14.1999C21.7602 11.9899 20.2902 10.1299 18.2902 9.51995ZM13.2802 15.4999C13.7402 15.6599 14.3602 15.9999 14.3602 17.0599C14.3602 17.9699 13.6502 18.6999 12.7702 18.6999H12.5202V18.9199C12.5202 19.2099 12.2902 19.4399 12.0002 19.4399C11.7102 19.4399 11.4802 19.2099 11.4802 18.9199V18.6999H11.3902C10.4302 18.6999 9.64023 17.8899 9.64023 16.8899C9.64023 16.5999 9.87023 16.3699 10.1602 16.3699C10.4502 16.3699 10.6802 16.5999 10.6802 16.8899C10.6802 17.3099 11.0002 17.6599 11.3902 17.6599H11.4802V15.9699L10.7202 15.6999C10.2602 15.5399 9.64023 15.1999 9.64023 14.1399C9.64023 13.2299 10.3502 12.4999 11.2302 12.4999H11.4802V12.2799C11.4802 11.9899 11.7102 11.7599 12.0002 11.7599C12.2902 11.7599 12.5202 11.9899 12.5202 12.2799V12.4999H12.6102C13.5702 12.4999 14.3602 13.3099 14.3602 14.3099C14.3602 14.5999 14.1302 14.8299 13.8402 14.8299C13.5502 14.8299 13.3202 14.5999 13.3202 14.3099C13.3202 13.8899 13.0002 13.5399 12.6102 13.5399H12.5202V15.2299L13.2802 15.4999Z"
                                fill="#187586" />
                            <path
                                d="M10.6797 14.14C10.6797 14.56 10.7997 14.62 11.0597 14.72L11.4797 14.87V13.54H11.2297C10.9197 13.54 10.6797 13.81 10.6797 14.14Z"
                                fill="#187586" />
                        </svg>
                    </div>
                    <div class="title">Available Balance</div>
                    <div class="count">
                        <div class="count-left">${{number_format($availableBalance,2)}}</div>
                    </div>
                </div>
                <div class="item">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 512 512" fill="none">
                            <path d="M421.589 320.043C419.484 319.976 417.407 320.534 415.619 321.647C413.831 322.759 412.412 324.376 411.541 326.293C399.128 353.76 379.661 377.448 355.121 394.948C330.58 412.447 301.841 423.134 271.829 425.92L274.219 423.552C275.212 422.561 276 421.384 276.538 420.088C277.075 418.792 277.352 417.403 277.352 416C277.352 414.597 277.075 413.208 276.538 411.912C276 410.616 275.212 409.439 274.219 408.448C273.228 407.455 272.051 406.666 270.755 406.129C269.459 405.591 268.07 405.314 266.667 405.314C265.263 405.314 263.874 405.591 262.578 406.129C261.282 406.666 260.105 407.455 259.115 408.448L237.781 429.781C236.788 430.772 236 431.949 235.462 433.245C234.924 434.541 234.647 435.93 234.647 437.333C234.647 438.736 234.924 440.126 235.462 441.421C236 442.717 236.788 443.894 237.781 444.885L259.115 466.219C260.105 467.212 261.282 468 262.578 468.538C263.874 469.076 265.263 469.352 266.667 469.352C268.07 469.352 269.459 469.076 270.755 468.538C272.051 468 273.228 467.212 274.219 466.219C275.212 465.228 276 464.051 276.538 462.755C277.075 461.459 277.352 460.07 277.352 458.667C277.352 457.264 277.075 455.874 276.538 454.578C276 453.283 275.212 452.105 274.219 451.115L270.549 447.467C304.912 444.848 337.938 433.033 366.164 413.26C394.39 393.487 416.776 366.484 430.976 335.083C431.554 333.805 431.875 332.426 431.92 331.025C431.964 329.624 431.733 328.227 431.237 326.916C430.742 325.604 429.993 324.403 429.033 323.381C428.073 322.359 426.921 321.536 425.643 320.96C424.365 320.391 422.987 320.08 421.589 320.043ZM73.4505 234.752C71.0571 235.018 68.824 236.085 67.1145 237.781L45.7812 259.115C44.7878 260.105 43.9997 261.283 43.462 262.578C42.9243 263.874 42.6475 265.264 42.6475 266.667C42.6475 268.07 42.9243 269.459 43.462 270.755C43.9997 272.051 44.7878 273.228 45.7812 274.219C46.772 275.212 47.9491 276 49.245 276.538C50.5409 277.076 51.9302 277.352 53.3332 277.352C54.7362 277.352 56.1255 277.076 57.4214 276.538C58.7173 276 59.8944 275.212 60.8852 274.219L64.5332 270.549C67.1532 304.887 78.9553 337.889 98.7041 366.101C118.453 394.313 145.422 416.698 176.789 430.912C178.067 431.49 179.445 431.811 180.847 431.856C182.248 431.9 183.645 431.669 184.956 431.173C186.268 430.678 187.469 429.929 188.491 428.969C189.513 428.009 190.336 426.857 190.912 425.579C191.49 424.301 191.811 422.922 191.856 421.521C191.9 420.12 191.669 418.723 191.173 417.412C190.678 416.1 189.929 414.899 188.969 413.877C188.009 412.855 186.857 412.032 185.579 411.456C158.145 399.036 134.488 379.576 117.012 355.052C99.5365 330.527 88.8641 301.814 86.0799 271.829L88.4479 274.219C89.4387 275.212 90.6158 276 91.9117 276.538C93.2076 277.076 94.5968 277.352 95.9999 277.352C97.4029 277.352 98.7922 277.076 100.088 276.538C101.384 276 102.561 275.212 103.552 274.219C104.545 273.228 105.333 272.051 105.871 270.755C106.409 269.459 106.686 268.07 106.686 266.667C106.686 265.264 106.409 263.874 105.871 262.578C105.333 261.283 104.545 260.105 103.552 259.115L82.2185 237.781C81.0818 236.652 79.7052 235.793 78.1909 235.268C76.6767 234.744 75.0424 234.567 73.4505 234.752ZM244.117 42.7306C241.721 43.0021 239.488 44.0774 237.781 45.7813C235.782 47.7816 234.658 50.4942 234.658 53.3226C234.658 56.151 235.782 58.8636 237.781 60.8639L241.451 64.5333C207.09 67.1499 174.066 78.9619 145.84 98.7311C117.614 118.5 95.2267 145.499 81.0239 176.896C80.4457 178.173 80.125 179.552 80.0802 180.953C80.0353 182.355 80.2672 183.751 80.7626 185.063C81.2579 186.375 82.007 187.576 82.967 188.598C83.927 189.62 85.079 190.442 86.3572 191.019C88.9346 192.18 91.8675 192.27 94.5115 191.27C97.1556 190.27 99.2945 188.261 100.459 185.685C112.871 158.219 132.338 134.531 156.879 117.031C181.42 99.5312 210.158 88.8447 240.171 86.0586L237.781 88.4479C235.782 90.4482 234.658 93.1608 234.658 95.9893C234.658 98.8177 235.782 101.53 237.781 103.531C238.772 104.524 239.949 105.312 241.245 105.85C242.541 106.388 243.93 106.664 245.333 106.664C246.736 106.664 248.125 106.388 249.421 105.85C250.717 105.312 251.894 104.524 252.885 103.531L274.219 82.1973C276.218 80.197 277.342 77.4844 277.342 74.6559C277.342 71.8275 276.218 69.1149 274.219 67.1146L252.885 45.7813C251.75 44.6479 250.375 43.7851 248.86 43.2569C247.346 42.7287 245.732 42.5488 244.139 42.7306H244.117ZM331.051 80.0853C329.638 80.0435 328.231 80.2828 326.912 80.7893C325.597 81.282 324.393 82.0294 323.368 82.9885C322.343 83.9477 321.517 85.0997 320.939 86.3786C319.784 88.9537 319.697 91.8812 320.697 94.5202C321.697 97.1592 323.701 99.2945 326.272 100.459C353.738 112.871 377.427 132.339 394.926 156.879C412.426 181.42 423.112 210.159 425.899 240.171L423.552 237.781C422.561 236.788 421.384 236 420.088 235.462C418.792 234.924 417.403 234.648 416 234.648C414.597 234.648 413.208 234.924 411.912 235.462C410.616 236 409.439 236.788 408.448 237.781C407.455 238.772 406.666 239.949 406.129 241.245C405.591 242.541 405.314 243.93 405.314 245.333C405.314 246.736 405.591 248.126 406.129 249.421C406.666 250.717 407.455 251.894 408.448 252.885L429.781 274.219C430.772 275.212 431.949 276 433.245 276.538C434.541 277.076 435.93 277.352 437.333 277.352C438.736 277.352 440.126 277.076 441.421 276.538C442.717 276 443.894 275.212 444.885 274.219L466.219 252.885C467.212 251.894 468 250.717 468.538 249.421C469.076 248.126 469.352 246.736 469.352 245.333C469.352 243.93 469.076 242.541 468.538 241.245C468 239.949 467.212 238.772 466.219 237.781C465.228 236.788 464.051 236 462.755 235.462C461.459 234.924 460.07 234.648 458.667 234.648C457.264 234.648 455.874 234.924 454.578 235.462C453.282 236 452.105 236.788 451.115 237.781L447.467 241.451C444.848 207.088 433.033 174.062 413.26 145.836C393.487 117.61 366.484 95.2238 335.083 81.0239C333.806 80.448 332.45 80.1291 331.051 80.0853Z" fill="#187586"/>
                            <path d="M256 128C185.429 128 128 185.429 128 256C128 326.571 185.429 384 256 384C326.571 384 384 326.571 384 256C384 185.429 326.571 128 256 128ZM256 181.333C258.829 181.333 261.542 182.457 263.542 184.458C265.543 186.458 266.667 189.171 266.667 192V202.667C284.203 202.667 298.667 217.131 298.667 234.667C298.667 237.496 297.543 240.209 295.542 242.209C293.542 244.21 290.829 245.333 288 245.333C285.171 245.333 282.458 244.21 280.458 242.209C278.457 240.209 277.333 237.496 277.333 234.667C277.333 228.565 272.768 224 266.667 224H245.333C239.232 224 234.667 228.565 234.667 234.667C234.667 240.768 239.232 245.333 245.333 245.333H266.667C284.203 245.333 298.667 259.797 298.667 277.333C298.667 294.869 284.203 309.333 266.667 309.333V320C266.667 322.829 265.543 325.542 263.542 327.542C261.542 329.543 258.829 330.667 256 330.667C253.171 330.667 250.458 329.543 248.458 327.542C246.457 325.542 245.333 322.829 245.333 320V309.333C227.797 309.333 213.333 294.869 213.333 277.333C213.333 274.504 214.457 271.791 216.458 269.791C218.458 267.79 221.171 266.667 224 266.667C226.829 266.667 229.542 267.79 231.542 269.791C233.543 271.791 234.667 274.504 234.667 277.333C234.667 283.435 239.232 288 245.333 288H266.667C272.768 288 277.333 283.435 277.333 277.333C277.333 271.232 272.768 266.667 266.667 266.667H245.333C227.797 266.667 213.333 252.203 213.333 234.667C213.333 217.131 227.797 202.667 245.333 202.667V192C245.333 189.171 246.457 186.458 248.458 184.458C250.458 182.457 253.171 181.333 256 181.333Z" fill="#187586"/>
                        </svg>
                    </div>
                    <div class="title">Pending Balance</div>
                    <div class="count">
                        <div class="count-left">${{number_format($pendingBalance,2)}}</div>
                    </div>
                </div>
                <div style="height: inherit" class="item">
                    <div style="font-size: 16px;" class="title">Withdraw you balance</div>
                    <form action="{{route('doctor.stripe.account.withdraw')}}" method="POST">
                        @csrf
                        <input type="number" class="form-control" name="amount" placeholder="amount" id="">
                        @error('amount')
                            <div>
                                <strong class="invalid-feedback d-block">{{$message}}</strong>
                            </div>
                        @enderror
                        <button class="btn btn-dark mt-3" style="padding: 6px;font-size: 14px">Withdraw</button>
                    </form>
                </div>
            </div>
            <h3 class="mt-5">All Transactions</h3>
           <div class="mt-3" style="overflow-x: auto">
               <table class="table mt-3" style="border-left: 1px solid #c4c8cb;border-right: 1px solid #c4c8cb;border-top: 1px solid #c4c8cb;min-width: 1400px">
                   <thead>
                   <tr>
                       <th scope="col">Transaction ID</th>
                       <th scope="col">Amount</th>
                       <th scope="col">Fee</th>
                       <th scope="col">Net Balance</th>
                       <th scope="col">Currency</th>
                       <th scope="col">Created At</th>
                       <th scope="col">Status</th>
                       <th scope="col">Type</th>
                   </tr>
                   </thead>
                   <tbody>
                       @forelse($balanceTransactions as $transaction)
                           <tr>
                               <th scope="row">{{$transaction->id}}</th>
                               <td>${{number_format($transaction->amount != 0 ? $transaction->amount / 100 : $transaction->amount,2)}}</td>
                               <td>${{number_format($transaction->fee != 0 ? $transaction->fee / 100 : $transaction->fee,2)}}</td>
                               <td>${{number_format($transaction->net != 0 ? $transaction->net / 100 : $transaction->net,2)}}</td>
                               <td>{{strtoupper($transaction->currency)}}</td>
                               <td>{{\Carbon\Carbon::createFromTimestamp($transaction->created)->toDayDateTimeString()}}</td>
                               <td>{{ucfirst($transaction->status)}}</td>
                               <td>{{$transaction->type}}</td>
                           </tr>
                       @empty
                           <tr>
                               <td colspan="8" class="text-center">Not Transaction found.</td>
                           </tr>
                       @endforelse
                   </tbody>
               </table>
           </div>
            <div class="pagination-links d-flex gap-3 justify-content-end">
                <!-- "Previous" button: Go to previous page -->
                @if ($previousPageEndingBefore && $currentPage > 1)
                    <a class="btn btn-primary btn-sm" style="padding: 5px 8px; font-size: 13px" href="{{ route('doctor.wallet.index',['page'=> ($currentPage - 1),'ending_before'=>$previousPageEndingBefore])}}">Previous</a>
                @endif
                <!-- "Next" button: Go to next page -->
                @if ($nextPageStartingAfter)
                    <a class="btn btn-primary btn-sm" style="padding: 5px 8px; font-size: 13px" href="{{ route('doctor.wallet.index',['page'=> ($currentPage + 1),'starting_after'=>$nextPageStartingAfter])}}">Next</a>
                @endif
            </div>
        </div>
    </div>
@endsection

